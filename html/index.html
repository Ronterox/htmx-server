<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Htmx and Php</title>
    <script src="https://unpkg.com/htmx.org/dist/htmx.js"></script>

    <style>
        label:has(input) {
            margin: 10px;
            cursor: pointer;
        }

        input {
            padding: 5px;
            margin: 10px;
            border-radius: 5px;
            border: 1px solid #ccc;
        }

        form {
            margin: 10px;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 5px;
            background-color: #f9f9f9;
            display: inline-block;
        }

        form>button {
            padding: 5px 10px;
            border-radius: 5px;
            border: 1px solid #ccc;
            cursor: pointer;
        }

        button[type="submit"] {
            float: inline-end;
        }

        #contacts {
            max-height: 80vh;
            overflow-y: auto;
            scroll-snap-align: start;
            scroll-snap-type: y mandatory;
            scroll-snap-stop: always;
            counter-reset: contact;
        }

        #contacts>div {
            margin: 10px;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 5px;
            background-color: #f9f9f9;
            counter-increment: contact;
            position: sticky;
            top: calc(counter(contact) * 100px);
        }

        #contacts>div::before {
            content: counter(contact);
            margin-right: 10px;
        }

        .icon {
            display: flex;
            justify-content: center;
            align-items: center;
            margin: auto 10px;
            color: red;
            width: 50px;
            height: 50px;
            cursor: pointer;
        }
    </style>

</head>

<body>
    <form hx-post="/contact.php" hx-swap="none">
        <label>Name: <input name="name" type="text"></label>
        <br />
        <label>Email: <input name="email" type="email"></label>
        <br />
        <button hx-target="body" hx-swap="outerHTML" hx-delete="/contact.php?id=all">Reset</button>
        <button type="submit">Submit</button>
    </form>
    <hr />
    <section id="contacts">@render contacts</section>
</body>

</html>

@block contact
<div style="display: flex;">
    <address>
        <h2>{{ $name }}</h2>
        <p>{{ $email }}</p>
    </address>
    <picture class="icon" hx-delete="/contact.php?id={{ $id }}" hx-target="closest div" hx-swap="outerHTML">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="100" height="100" fill="none"
            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <polyline points="3 6 5 6 21 6" />
            <path d="M19 6l-2 14H7L5 6" />
            <path d="M10 6V4a2 2 0 0 1 2-2h0a2 2 0 0 1 2 2v2" />
            <line x1="9" y1="10" x2="9" y2="16" />
            <line x1="15" y1="10" x2="15" y2="16" />
        </svg>
    </picture>
</div>
@endblock

@block oob-contact
<section id="contacts" hx-swap-oob="afterbegin">
    @render contact
</section>
@endblock

@block contacts
    @foreach $contacts as $contact
        @render contact
    @endfor
@endblock

@block test
<div>
    <h1>__TESTING__</h1>
</div>
@endblock
